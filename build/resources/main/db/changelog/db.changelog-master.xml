<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
    xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
        http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.8.xsd">

    <!-- ChangeSet 1: Create 'user' table -->
    <changeSet id="1" author="mousumi">
        <createTable tableName="ls_user">
            <column name="user_id" type="BIGSERIAL">
                <constraints primaryKey="true"/>
            </column>
            <column name="dob" type="DATE"/>
            <column name="email" type="VARCHAR(255)"/>
            <column name="is_admin" type="BOOLEAN">
                <constraints nullable="false"/>
            </column>
            <column name="is_editor" type="BOOLEAN">
                <constraints nullable="false"/>
            </column>
            <column name="password_hash" type="VARCHAR(255)"/>
            <column name="registration_date" type="TIMESTAMP"/>
            <column name="username" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>
    <changeSet id="2" author="mousumi">
        <createTable tableName="LS_IMAGE">
            <column name="ID" type="BIGINT" autoIncrement="true">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="IMAGE_TYPE" type="VARCHAR(255)"/>
            <column name="IMAGE_LOCATION" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>
     <changeSet id="3" author="mousumi">
        <createTable tableName="LS_CONTENT_TYPE">
            <column name="ID" type="BIGINT" autoIncrement="true">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="TYPE" type="NUMERIC"/>
            <column name="NAME" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>
    <changeSet id="4" author="mousumi">
        <createTable tableName="LS_CONTENT">
            <column name="ID" type="BIGINT" autoIncrement="true">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="CONTENT_TYPE_ID" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="CONTENT_LOCATION" type="VARCHAR(255)"/>
            <column name="IMAGE_ID" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>
        <addForeignKeyConstraint baseTableName="LS_CONTENT"
                                 baseColumnNames="CONTENT_TYPE_ID"
                                 constraintName="fk_content_content_type"
                                 referencedTableName="LS_CONTENT_TYPE"
                                 referencedColumnNames="ID"/>
                                 
        <addForeignKeyConstraint baseTableName="LS_CONTENT"
                                 baseColumnNames="IMAGE_ID"
                                 constraintName="fk_content_image"
                                 referencedTableName="LS_IMAGE"
                                 referencedColumnNames="ID"/>
    </changeSet>
    <changeSet id="5" author="mousumi">
        <createTable tableName="LS_USER_HEALTH_PROFILE">
            <column name="UniqueID" type="BIGINT" autoIncrement="true">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="BODY_TYPE" type="VARCHAR(255)"/>
            <column name="USER_ID" type="BIGINT"/>
            <column name="FOOD_HABIT" type="VARCHAR(255)"/>
            <column name="PHYSICAL_ACTIVITY" type="VARCHAR(255)"/>
           <column name="ALLERGY_IDS" type="BIGINT[]" />
        </createTable>
    </changeSet>
    <changeSet id="6" author="yourname">
        <createTable tableName="LS_ALLERGY">
            <column name="UniqueID" type="BIGINT" autoIncrement="true">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="ALLERGY_TYPE" type="VARCHAR(255)"/>
            <column name="ALLERGY_NAME" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>
    <changeSet id="7" author="yourname">
        <createTable tableName="LS_QUESTIONARE">
            <column name="UniqueID" type="BIGINT" autoIncrement="true">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="QUESTION_TEXT" type="TEXT"/>
            <column name="CREATED_DATE" type="TIMESTAMP"/>
            <column name="CREATED_BY" type="BIGINT"/>
            <column name="UPDATED_DATE" type="TIMESTAMP"/>
            <column name="UPDATED_BY" type="BIGINT"/>
            <column name="DELETED_DATE" type="TIMESTAMP"/>
            <column name="DELETED_BY" type="BIGINT"/>
        </createTable>
    </changeSet>   
    <changeSet id="8" author="mousumi">
       <createTable tableName="LS_ROLE">
            <column name="ID" type="SERIAL">
                <constraints primaryKey="true" nullable="false" />
            </column>
            <column name="NAME" type="VARCHAR(50)">
                <constraints nullable="false" />
            </column>
        </createTable>
    </changeSet>
</databaseChangeLog>
